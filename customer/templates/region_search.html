<form class="mt-3" method="post" enctype="multipart/form-data">{% csrf_token %}
    <select name="region1" id="region1">
        <option>---------- 도 ----------</option>
        {% for region1 in region1s %}
            <option>{{ region1.name }}</option>
        {% endfor %}
    </select>
    <select name="region2" id="region2">
        <option>---------- 시 ----------</option>
        {% for region2 in region2s %}
            <option>{{ region2.name }}</option>
        {% endfor %}
    </select>
    <button type="submit" class="btn btn-primary" onclick="">검색</button>
</form>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script type="text/javascript">
    $(function(){
        $('#region1').change(function() {
            var region1_name = this.value

            $.ajax({
                type: "POST",
                url: "{% url 'customer:ajax_get_region2' %}",
                data: {'region1_name': region1_name, 'csrfmiddlewaretoken': '{{ csrf_token }}'},
                dataType: "json",
                success: function(response){
                    var items = "<option>---------- 시 ----------</option>";
                    for(var i=0; i<response.region2s.length; i++){
                        items += ("<option>" + response.region2s[i].name  + "</option>")
                    }

                    $("#region2").html(items);
                },
                error: function(request, status, error){
                    alert(error);
                },
            });
        });
    });
</script>